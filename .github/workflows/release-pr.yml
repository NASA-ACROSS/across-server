# Run this workflow only on autogenerated release-please PRs
name: Release PR Checks
on:
  pull_request:
    branches: [ 'main' ]
    types: [opened, synchronize, reopened]
    # look for the specific files that are changed in a release-pr
    paths:
      - CHANGELOG.md
      - across_server/__init__.py
      - .release-please-manifest.json

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

permissions:
  contents: write
  pull-requests: write

jobs:
  ci-checks:
    uses: ./.github/workflows/workflow-ci-checks.yml
    with:
      format-changed-files: false
    secrets:
      ssh-private-key: ${{ secrets.ACROSS_TOOLS_SSH_KEY }}
